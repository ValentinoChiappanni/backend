{"version":3,"sources":["../../../lib/routes/utils.js"],"names":["withErrorHandling","fn","req","res","next","Promise","resolve","catch","errorAwareRouter","basicRouter","express","Router","newRouter","params","get","path","controller","post","patch","delete","put"],"mappings":";;;;;;;;AAAA;;;;AAEO,MAAMA,iBAAiB,GAAIC,EAAD,IAAQ,CAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,KACvCC,OAAO,CAACC,OAAR,CAAgBL,EAAE,CAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,CAAlB,EAAoCG,KAApC,CAA0CH,IAA1C,CADK;;;;AAGA,SAASI,gBAAT,GAA4B;AACjC,QAAMC,WAAW,GAAGC,iBAAQC,MAAR,EAApB;;AACA,WAASC,SAAT,CAAmB,GAAGC,MAAtB,EAA8B;AAC5BJ,IAAAA,WAAW,CAAC,GAAGI,MAAJ,CAAX;AACD;;AACDD,EAAAA,SAAS,CAACE,GAAV,GAAgB,UAAUC,IAAV,EAAgBC,UAAhB,EAA4B;AAC1CP,IAAAA,WAAW,CAACK,GAAZ,CAAgBC,IAAhB,EAAsBf,iBAAiB,CAACgB,UAAD,CAAvC;AACD,GAFD;;AAGAJ,EAAAA,SAAS,CAACK,IAAV,GAAiB,UAAUF,IAAV,EAAgBC,UAAhB,EAA4B;AAC3CP,IAAAA,WAAW,CAACQ,IAAZ,CAAiBF,IAAjB,EAAuBf,iBAAiB,CAACgB,UAAD,CAAxC;AACD,GAFD;;AAGAJ,EAAAA,SAAS,CAACM,KAAV,GAAkB,UAAUH,IAAV,EAAgBC,UAAhB,EAA4B;AAC5CP,IAAAA,WAAW,CAACS,KAAZ,CAAkBH,IAAlB,EAAwBf,iBAAiB,CAACgB,UAAD,CAAzC;AACD,GAFD;;AAGAJ,EAAAA,SAAS,CAACO,MAAV,GAAmB,UAAUJ,IAAV,EAAgBC,UAAhB,EAA4B;AAC7CP,IAAAA,WAAW,CAACU,MAAZ,CAAmBJ,IAAnB,EAAyBf,iBAAiB,CAACgB,UAAD,CAA1C;AACD,GAFD;;AAGAJ,EAAAA,SAAS,CAACQ,GAAV,GAAgB,UAAUL,IAAV,EAAgBC,UAAhB,EAA4B;AAC1CP,IAAAA,WAAW,CAACW,GAAZ,CAAgBL,IAAhB,EAAsBf,iBAAiB,CAACgB,UAAD,CAAvC;AACD,GAFD;;AAGA,SAAOJ,SAAP;AACD","sourcesContent":["import express from 'express';\n\nexport const withErrorHandling = (fn) => (req, res, next) =>\n  Promise.resolve(fn(req, res, next)).catch(next);\n\nexport function errorAwareRouter() {\n  const basicRouter = express.Router();\n  function newRouter(...params) {\n    basicRouter(...params);\n  }\n  newRouter.get = function (path, controller) {\n    basicRouter.get(path, withErrorHandling(controller));\n  };\n  newRouter.post = function (path, controller) {\n    basicRouter.post(path, withErrorHandling(controller));\n  };\n  newRouter.patch = function (path, controller) {\n    basicRouter.patch(path, withErrorHandling(controller));\n  };\n  newRouter.delete = function (path, controller) {\n    basicRouter.delete(path, withErrorHandling(controller));\n  };\n  newRouter.put = function (path, controller) {\n    basicRouter.put(path, withErrorHandling(controller));\n  };\n  return newRouter;\n}\n"],"file":"utils.js"}