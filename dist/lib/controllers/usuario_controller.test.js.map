{"version":3,"sources":["../../../lib/controllers/usuario_controller.test.js"],"names":["describe","beforeAll","Usuario","bulkCreate","nombre","apellido","response","app","get","it","expect","statusCode","toBe","body","toMatchObject","data"],"mappings":";;AAAA;;AACA;;AACA;;AACA;;;;AAEAA,QAAQ,CAAC,oBAAD,EAAuB,MAAM;AACnCC,EAAAA,SAAS,CAAC,YAAY;AACpB,UAAM,wBAAN;AAEA,UAAMC,iBAAQC,UAAR,CAAmB,CACvB;AAAEC,MAAAA,MAAM,EAAE,QAAV;AAAoBC,MAAAA,QAAQ,EAAE;AAA9B,KADuB,EAEvB;AAAED,MAAAA,MAAM,EAAE,OAAV;AAAmBC,MAAAA,QAAQ,EAAE;AAA7B,KAFuB,CAAnB,CAAN;AAID,GAPQ,CAAT;AAQAL,EAAAA,QAAQ,CAAC,WAAD,EAAc,MAAM;AAC1B,QAAIM,QAAJ;AAEAL,IAAAA,SAAS,CAAC,YAAY;AACpBK,MAAAA,QAAQ,GAAG,MAAM,wBAAQC,YAAR,EAAaC,GAAb,CAAiB,eAAjB,CAAjB;AACD,KAFQ,CAAT;AAIAC,IAAAA,EAAE,CAAC,qBAAD,EAAwB,MAAM;AAC9BC,MAAAA,MAAM,CAACJ,QAAQ,CAACK,UAAV,CAAN,CAA4BC,IAA5B,CAAiC,GAAjC;AACD,KAFC,CAAF;AAIAH,IAAAA,EAAE,CAAC,+BAAD,EAAkC,MAAM;AACxC;AACAC,MAAAA,MAAM,CAACJ,QAAQ,CAACO,IAAV,CAAN,CAAsBC,aAAtB,CAAoC;AAClCC,QAAAA,IAAI,EAAE,CACJ;AAAEX,UAAAA,MAAM,EAAE,QAAV;AAAoBC,UAAAA,QAAQ,EAAE;AAA9B,SADI,EAEJ;AAAED,UAAAA,MAAM,EAAE,OAAV;AAAmBC,UAAAA,QAAQ,EAAE;AAA7B,SAFI;AAD4B,OAApC;AAMD,KARC,CAAF;AASD,GApBO,CAAR;AAqBD,CA9BO,CAAR","sourcesContent":["import request from 'supertest';\nimport { cleanDb } from '../../test/db_utils';\nimport app from '../app';\nimport Usuario from '../models/usuario';\n\ndescribe('Usuario controller', () => {\n  beforeAll(async () => {\n    await cleanDb();\n\n    await Usuario.bulkCreate([\n      { nombre: 'Pepita', apellido: 'La pistolera' },\n      { nombre: 'Juana', apellido: 'Azurduy' },\n    ]);\n  });\n  describe('/usuarios', () => {\n    let response;\n\n    beforeAll(async () => {\n      response = await request(app).get('/api/usuarios');\n    });\n\n    it('devuelve cÃ³digo 200', () => {\n      expect(response.statusCode).toBe(200);\n    });\n\n    it('devuelve la lista de usuarios', () => {\n      // Usamos toMatchObject y no toEquals para que solo mire los atributos que especificamos.\n      expect(response.body).toMatchObject({\n        data: [\n          { nombre: 'Pepita', apellido: 'La pistolera' },\n          { nombre: 'Juana', apellido: 'Azurduy' },\n        ],\n      });\n    });\n  });\n});\n"],"file":"usuario_controller.test.js"}